<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>IVEN â€” Cyber Forge</title>
  <style>
    :root{
      --bg-1:#050116;--bg-2:#0b0f2a;
      --accent:#ff4ec8;--accent-2:#5be3ff;
      --muted:#9aa5be;
      --glass:rgba(255,255,255,0.04);
      --radius:14px;
    }
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;}
    body{
      background:radial-gradient(1000px 600px at 10% 10%,rgba(91,227,255,0.06),transparent),
                 radial-gradient(800px 600px at 90% 90%,rgba(255,78,200,0.06),transparent),
                 linear-gradient(180deg,var(--bg-1),var(--bg-2));
      color:#e6eef8;padding:24px;box-sizing:border-box;
    }
    .wrap{max-width:1100px;margin:0 auto;display:grid;grid-template-columns:1fr 340px;gap:18px;}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
          border-radius:var(--radius);padding:20px;box-shadow:0 10px 30px rgba(2,6,23,0.5);}
    h2{margin:0 0 8px 0}
    input,textarea,button{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.05);
      background:rgba(0,0,0,0.15);color:#fff;font-size:14px;margin-top:6px;}
    .btn{background:linear-gradient(90deg,var(--accent),var(--accent-2));border:0;color:#071022;font-weight:700;cursor:pointer;}
    .ghost{background:transparent;border:1px solid rgba(255,255,255,0.1);color:var(--muted);}
    nav.bottom{position:fixed;bottom:22px;left:50%;transform:translateX(-50%);
      background:rgba(0,0,0,0.4);padding:10px 18px;border-radius:30px;display:flex;gap:16px;}
    .nav-btn{background:transparent;border:0;color:var(--muted);}
    .nav-btn.active{color:var(--accent);}
    @media(max-width:900px){.wrap{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h2>Invoice Generator</h2>
      <label>From</label><input id="from" value="KrshnForge Shop">
      <label>To</label><input id="to" placeholder="Customer name">
      <label>Item</label><input id="item" placeholder="Item description">
      <label>Price (â‚¹)</label><input id="price" type="number" value="0">
      <label>Notes</label><textarea id="notes"></textarea>
      <button id="makePdf" class="btn">Generate & Download PDF</button>
    </div>

    <div class="card">
      <h3>Live Stats</h3>
      <p>Total Signups: <span id="totalSignups">0</span></p>
      <p>Latest Signup: <span id="latestSignup">â€”</span></p>
      <p>Tokens Issued: <span id="tokenCount">0</span></p>
      <button id="refreshStats" class="ghost">Refresh</button>
    </div>
  </div>

  <nav class="bottom">
    <button class="nav-btn active">HOME</button>
    <button class="nav-btn">SIGNUP</button>
    <button class="nav-btn">STATS</button>
    <button class="nav-btn">PROFILE</button>
  </nav>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    const signupForm = 'https://forms.gle/RhxLSuZAsUor57JE9';
    let SHEET_CSV_URL = ''; // ðŸ‘ˆ yahan apna published CSV link daalna hai agar chaho

    // PDF generator
    const { jsPDF } = window.jspdf;
    document.getElementById("makePdf").onclick = () => {
      const from = document.getElementById("from").value;
      const to = document.getElementById("to").value;
      const item = document.getElementById("item").value;
      const price = document.getElementById("price").value;
      const notes = document.getElementById("notes").value;
      const doc = new jsPDF({unit:"pt",format:"a4"});
      doc.text(`From: ${from}`,40,60);
      doc.text(`To: ${to}`,40,80);
      doc.text(`Item: ${item}`,40,100);
      doc.text(`Price: â‚¹${price}`,40,120);
      doc.text(`Notes: ${notes}`,40,140);
      doc.save(`invoice_${Date.now()}.pdf`);
    };

    // CSV fetch
    async function fetchAndRenderStats(){
      const totalEl=document.getElementById("totalSignups");
      const latestEl=document.getElementById("latestSignup");
      const tokenEl=document.getElementById("tokenCount");
      totalEl.textContent="...";
      latestEl.textContent="Loading...";
      tokenEl.textContent="...";
      if(!SHEET_CSV_URL){totalEl.textContent="0";latestEl.textContent="No sheet";tokenEl.textContent="0";return;}
      try{
        const res=await fetch(SHEET_CSV_URL);
        const csv=await res.text();
        const lines=csv.trim().split(/\r?\n/);
        const rows=lines.slice(1);
        const total=rows.length;
        const last=rows[rows.length-1]?.split(",")||["â€”"];
        totalEl.textContent=total;
        latestEl.textContent=last[1]||"â€”";
        tokenEl.textContent=total*10;
      }catch(e){latestEl.textContent="Error";console.error(e);}
    }
    document.getElementById("refreshStats").onclick=fetchAndRenderStats;
    fetchAndRenderStats();
  </script>
</body>
</html>
